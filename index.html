<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>Fast Paced Drupal 8</title>

<meta name="description" content="An overview of tools available for web creators">
<meta name="author" content="Erin Marchak">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="//cdn.jsdelivr.net/reveal.js/2.6.2/css/reveal.min.css">
<link rel="stylesheet" href="css/theme/myplanet.css" id="theme">

<!-- For syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">

<script>
//-- If the query includes 'print-pdf', include the PDF print sheet
if( window.location.search.match( /print-pdf/gi ) ) {
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = 'css/print/pdf.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
}
</script>

<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script>
<![endif]-->
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section data-state="black">
<h1>Fast Paced Drupal 8</h1>
<p><em>Speed up with composer, console and services</em></p>
<p><small><a href="http://twitter.com/emarchak">@emarchak</a> / <a href="http://twitter.com/myplanetHQ">@myplanetHQ</a></small></p>
<p><small><a href="http://emarchak.github.io/fastpaced_drupal8/">emarchak.github.io/fastpaced_drupal8</a> / <a href="http://github.com/emarchak/fastpaced_videos">github.com/emarchak/fastpaced_videos</a></small></p>
</section>
<! Who -------------------------------------------------------------------------------------->

<section data-state="black no-logo">
<a href="http://myplanet.com"><img src="img/mp_logo_wt.png" class="nude" alt="Myplanet"/></a>
<p><a href="http://twitter.com/myplanetHQ">@myplanetHQ</a></p>
</section>

<section data-state="pink">
<a href="http://myplanet.io"><img src="img/erin.png" class="nude" alt="Erin Marchak"/></a>
<p><a href="http://twitter.com/emarchak">@emarchak</a><p>
</section>

<! Contents -------------------------------------------------------------------------------------->

<section>
  <h2>Why Change for D8?</h2>
  <ol>
  <li class="fragment">Speed up your development process</li>
  <li class="fragment">Play well with others</li>
  </ol>
</section>

<section>
  <h2>Dependencies</h2>
  <ul>
  <dt><a href="https://getcomposer.org">Composer</a></dt>
  <dd><small>Dependency manager for PHP</small></dd>
  <dt><a href="http://Drupalconsole.com">Drupal Console</a></dt>
  <dd><small>Extends Symfony console for boilerplates and interactions.</small></dd>
  <dt><a href="http://docs.guzzlephp.org/">Guzzle (in core)</a></dt>
  <dd><small>Guzzle is a PHP HTTP client.</small></dd>
  <dt>Familiarity with Drupal 7 development</dt>
  </ul>

</section>


<section>
<h2>Overview</h2>
  
  <ol>
  <li>Build using Composer</li>
  <li class="fragment">Install using Console</li>
  <li class="fragment">Create a Module using Console</li>
  <li class="fragment">Export Content Types using Console</li>
  <li class="fragment">Create Admin Form using Console</li>
  <li class="fragment">Create a Service using Console</li>
  <li class="fragment">Import Nodes using Guzzle</li>
  <li class="fragment">Include your module using Composer</li>
  </ol>
</section>


<section data-state="black">
<h1>Witness Me!</h1>
</section>

<! 1. Build using Composer ------------------------------------------------------------------>
<section>
<p><strong>1. Build using Composer</strong></p>

<p>Download Drupal into the docroot.</p>
<p><small><a href="https://www.lullabot.com/articles/goodbye-drush-make-hello-composer">Composer is a really exciting alternative</a> to Drush Make for building sites.</small></p>

<pre><code data-trim data-noescape>$ composer create-project drupal/drupal docroot 8.0.5
$ cd docroot
</code></pre>
</section>
<! -- >
<section>
<p>Managing patches using composer<p>
<p><small>For Drupal 8.0.5 only, we'll need to <a href="https://www.drupal.org/node/2664274">patch core</a>, but any module can be patched. </small></p>
<pre><code data-trim data-noescape>$ composer require cweagans/composer-patches --no-update
</code></pre>
<pre><code data-trim data-noescape>"extra": {...
  "patches": {
    "drupal/drupal": {
      "Combination of --prefer-dist and .gitattributes confuses our vendor test cleanup": "https://www.drupal.org/files/issues/2664274-37.patch"
  }
}
</code></pre>
</section>
<! -- >
<section>
  <p>Add to installer paths to let us download modules to ./docroot/modules/contrib</p>
<pre><code data-trim data-noescape>"extra": {...
  "installer-paths": {
    "modules/contrib/{$name}": [
      "type:drupal-module"
    ] 
  }
},
</code></pre>
</section>
<! -- >
<section>
  <p>Add <a href="https://packagist.drupal-composer.org">Drupal Composer</a> as a repo,<br/> so we can download Drupal modules.</p>
  <pre><code data-trim data-noescape>"repositories": [ { 
    "type": "composer", 
    "url": "https://packagist.drupal-composer.org"
} ]
</pre></code>

</section>

<! -- >
<section>

<p>Install some Drupal modules!</p>
<p><small>
  <a href="https://www.drupal.org/project/admin_toolbar">Admin Toolbar</a> improves the core Drupal toolbar,
  <br/> and <a href="https://www.drupal.org/project/video_embed_field">Video Embed Field</a> is used in our demo.
</small></p> 
<pre><code data-trim data-noescape>$ composer require drupal/admin_toolbar:8.1.14 --no-update
$ composer require drupal/video_embed_field:8.1.0-rc5 --no-update
$ composer update
</code></pre>

</section>

<! 2. Install using Console -------------------------------------------------------------------->
<section>
<p><strong>2. Install using Console</strong></p>
<pre><code data-trim data-noescape>$ drupal site:install
$ drupal module:install admin_toolbar
$ drupal module:install video_embed_field
</code></pre>
</section>

<section>
<p>Move the configuration sync directory outside of the docroot,<br/> and add <a href="https://www.drupal.org/node/2410395">Symfony's new trusted host patterns</a>.</p>
<! -- >
<pre><code data-trim data-noescape>$config_directories['sync'] = '../config/sync';
$settings['trusted_host_patterns'] = [ '^fastpaced.local$' ];
</code></pre>
<pre><code data-trim data-noescape>$ drupal config:export
</code></pre>
</section>

<! 3. Create a Module using Console ------------------------------------------------------------------------>

<section>
<p><strong>3. Create a Module using Console</strong></p>

<p>Let's create a fast-paced module...</p>

<pre><code data-trim data-noescape>$ drupal generate:module

Enter the new module name:
&gt; Fastpaced videos 
</code></pre>

</section>

<section>
<p>... and a speedy content type!</p>

<pre><code data-trim data-noescape>$ drupal generate:entity:bundle

Enter the module name [admin_toolbar]:
&gt; fastpaced_videos

Enter the machine name of your new content type [default]:
&gt; video

$ drupal module:install fastpaced_videos
</code></pre>

</section>

<! 4. Export Content Types using Console -------------------------------------------------------------------->
<section>
<p><strong>4. Export Content Types using Console</strong></p>

<p>Log into the site and configure the content type as needed, before you export it.</p>

<pre><code data-trim data-noescape>$ drupal config:export:content:type
&gt; video

Export content type in module as an optional configuration (yes/no) [yes]:
&gt; no
</code></pre>

</section>

<section>
<p>Can we generate some example content? Yes we can.</p>

<pre><code data-trim data-noescape>$ drupal create:nodes
</code></pre>

</section>

<! 5. Create Admin form using Console -------------------------------------------------------------------->
<section>
<p><strong>5. Create Admin form using Console</strong></p>

<pre><code data-trim data-noescape>$ drupal generate:form:config

Enter the Form Class name [DefaultForm]:
&gt; ImportSettingsForm    

Do you want to generate a form structure? (yes/no) [yes]:
&gt; y

Type:          number
Input label:   Import Max
Description:   Maximum amount of nodes to import pre cron run
Default value: 10

Type:          textfield
Input label:   Search Terms
Description:   Feed to import from
Default value: macaframa

Update routing file (yes/no) [yes]:
&gt; yes   


Generate a menu link (yes/no) [yes]:
&gt; yes

A title for the menu link [ImportSettingsForm]:
&gt; Fast Paced Import Settings

Menu parent [system.admin_config_system]:
&gt; system.admin_config_services
</code></pre>

</section>

<! -->
<section>
<p><strong>Export the configuration settings.</strong></p>

<pre><code data-trim data-noescape>$ drupal config:export:single --directory=modules/custom/fastpaced_videos/config/install
  
Configuration type [Simple configuration]:
&gt; system.simple

Configuration name [automated_cron.settings]:
&gt; fastpaced_videos.importsettings
</code></pre>
</section>



<! 6. Import Nodes using Guzzle -------------------------------------------------------------------->
<section>
<p><strong>6. Import Nodes using Guzzle</strong></p>

<p>Add <code>fastpaced_videos_cron()</code>.</p>
 <pre><code data-trim data-noescape>/**
 * @file
 * Contains fastpaced_videos.module.
 */

use Drupal\Core\Url;
use Drupal\Component\Serialization\Json;
/**
 * Implements hook_cron().
 */
function fastpaced_videos_cron() {...}</code></pre>

<p><small>Some parts of Drupal 8 are still procedural like 7, <br/><code>hook_theme</code> and <code>hook_cron</code>, for example.</small></p>
<p><small><a href="http://github.com/emarchak/fastpaced_videos">Refer to the repo</a> for further changes to <code>fastpaced_videos.module</code></small></p>


</section>

<! 7. Create a Service using Console -------------------------------------------------------------------->
<section>
<p><strong>7. Create a Service using Console</strong></p>

<p>We'll be importing videos using guzzle, so we'll need to create a service to save them.</p>

<pre><code data-trim data-noescape>$ drupal generate:service
Enter the service name [fastpaced_videos.default]:
&gt; fastpaced_videos.import

Enter the Class name [DefaultService]:
&gt; ImportService

Do you want to load services from the container (yes/no) [no]:
&gt; yes

Enter your service [ ]:
&gt; entity.query
&gt; entity_type.manager
</code></pre>

<p><small><a href="http://github.com/emarchak/fastpaced_videos">Refer to the repo</a> for further changes to <code>fastpaced_videos/src/ImportServiceInterface.php</code></small></p>


</section>

<! 8. Add your custom module to composer -------------------------------------------------------------------------------------->
<section>
  <p><strong>8. Add your custom module to composer</strong></p>
    <p>Add <a href="http://github.com/emarchak/fastpaced_videos">our github repo</a> as a repo, <br/>so we can can download our custom module.</p>
  <pre><code data-trim data-noescape>"repositories": [... { 
  "type": "git", 
  "url": "https://github.com/emarchak/fastpaced_videos.git"
}]
</code></pre>
  <pre><code data-trim data-noescape>$ composer require emarchak/fastpaced_videos
</pre></code>
  
</section>

<! Thank you -------------------------------------------------------------------------------------->

<section>
<h2>Ride eternal, shiny and chrome.</h2>
<p>
<a href="http://twitter.com/emarchak">@emarchak</a> / <a href="http://twitter.com/myplanetHQ">@myplanetHQ</a>
</p>
<p><small><a href="http://emarchak.github.io/fastpaced_drupal8/">emarchak.github.io/fastpaced_drupal8</a> / 
<a href="http://github.com/emarchak/fastpaced_videos">github.com/emarchak/fastpaced_videos</a></small></p>
</section>

</div>

</div>

<script src="//cdn.jsdelivr.net/reveal.js/2.6.2/lib/js/head.min.js"></script>
<script src="//cdn.jsdelivr.net/reveal.js/2.6.2/js/reveal.min.js"></script>

<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: false,
progress: true,
history: true,
center: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

transition: 'fade',

// Parallax scrolling
// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
// parallaxBackgroundSize: '2100px 900px',

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
{ src: '//cdn.jsdelivr.net/reveal.js/2.6.2/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});

</script>

</body>
</html>
